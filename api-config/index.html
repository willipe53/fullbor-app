<!DOCTYPE html>
<html>
  <head>
    <title>Fullbor API Documentation</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Explicit favicon -->
    <link rel="icon" href="https://fullbor.ai/boar.png" type="image/png" />
    <!-- Redoc standalone script -->
    <script src="https://cdn.redoc.ly/redoc/latest/bundles/redoc.standalone.js"></script>

    <style>
      body {
        margin: 0;
        padding: 0;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          sans-serif;
      }
      redoc {
        width: 100%;
        height: 100vh;
      }
      .loading {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        font-size: 18px;
        color: #666;
      }
      .error {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        height: 100vh;
        font-size: 16px;
        color: #d32f2f;
        padding: 20px;
        text-align: center;
      }
    </style>
  </head>
  <body>
    <div id="loading" class="loading">Loading API documentation...</div>
    <div id="error" class="error" style="display: none">
      <h2>Error Loading Documentation</h2>
      <p id="error-message"></p>
      <p>Please check the browser console for more details.</p>
    </div>
    <div id="redoc-container"></div>

    <script>
      // Show loading message
      document.getElementById("loading").style.display = "flex";

      // Wait for Redoc to load and initialize
      function initRedoc() {
        try {
          if (typeof Redoc !== "undefined") {
            console.log("Redoc loaded successfully");

            // Initialize Redoc with the OpenAPI spec
            try {
              Redoc.init(
                "openapi.json",
                {
                  scrollYOffset: 0,
                  hideDownloadButton: false,
                  theme: {
                    colors: {
                      primary: {
                        main: "#32329f",
                      },
                    },
                  },
                },
                document.getElementById("redoc-container")
              );

              console.log("Redoc initialized successfully");
              // Hide loading and show redoc
              document.getElementById("loading").style.display = "none";
              document.getElementById("redoc-container").style.display =
                "block";
            } catch (error) {
              console.error("Error initializing Redoc:", error);
              showError(
                "Failed to initialize documentation viewer: " + error.message
              );
            }
          } else {
            console.log("Redoc not loaded yet, retrying...");
            setTimeout(initRedoc, 100);
          }
        } catch (error) {
          console.error("Error initializing Redoc:", error);
          showError(
            "Failed to initialize documentation viewer: " + error.message
          );
        }
      }

      function showError(message) {
        document.getElementById("loading").style.display = "none";
        document.getElementById("error").style.display = "flex";
        document.getElementById("error-message").textContent = message;
      }

      // Start initialization
      initRedoc();

      // Handle script loading errors
      window.addEventListener("error", function (e) {
        console.error("Script error:", e);
        if (e.filename && e.filename.includes("redoc")) {
          showError(
            "Failed to load documentation script. Please try refreshing the page."
          );
        }
      });
    </script>
  </body>
</html>
